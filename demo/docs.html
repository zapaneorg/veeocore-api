<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VeeoCore API - Documentation Compl√®te</title>
  <meta name="description" content="Documentation compl√®te de l'API VeeoCore - Int√©gration Tenant, Driver App, WebSocket temps r√©el">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #1e293b;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-500: #64748b;
      --gray-700: #334155;
      --gray-900: #0f172a;
    }
    
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--gray-50);
      color: var(--gray-900);
      line-height: 1.6;
    }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      padding: 16px 32px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: white;
    }
    
    .logo-icon { font-size: 28px; }
    .logo-text { font-size: 24px; font-weight: 800; }
    .logo-badge {
      background: rgba(255,255,255,0.2);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .nav-links {
      display: flex;
      gap: 8px;
    }
    
    .nav-links a {
      color: rgba(255,255,255,0.9);
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .nav-links a:hover, .nav-links a.active {
      background: rgba(255,255,255,0.2);
      color: white;
    }
    
    /* Layout */
    .layout {
      display: flex;
      max-width: 1600px;
      margin: 0 auto;
    }
    
    /* Sidebar */
    .sidebar {
      width: 280px;
      background: white;
      border-right: 1px solid var(--gray-200);
      height: calc(100vh - 64px);
      position: sticky;
      top: 64px;
      overflow-y: auto;
      padding: 24px 16px;
    }
    
    .sidebar-section {
      margin-bottom: 24px;
    }
    
    .sidebar-title {
      font-size: 11px;
      font-weight: 700;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 8px 12px;
    }
    
    .sidebar-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      color: var(--gray-700);
      text-decoration: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.15s;
    }
    
    .sidebar-link:hover {
      background: var(--gray-100);
      color: var(--primary);
    }
    
    .sidebar-link.active {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
      color: var(--primary);
    }
    
    .sidebar-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Main Content */
    .main {
      flex: 1;
      padding: 32px 48px;
      max-width: 1000px;
    }
    
    .page-title {
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .page-subtitle {
      font-size: 18px;
      color: var(--gray-500);
      margin-bottom: 32px;
    }
    
    /* Cards */
    .card {
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    .card-icon.primary { background: rgba(99, 102, 241, 0.1); }
    .card-icon.success { background: rgba(16, 185, 129, 0.1); }
    .card-icon.warning { background: rgba(245, 158, 11, 0.1); }
    .card-icon.danger { background: rgba(239, 68, 68, 0.1); }
    
    .card-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--gray-900);
    }
    
    /* Code Blocks */
    .code-block {
      background: var(--gray-900);
      border-radius: 12px;
      overflow: hidden;
      margin: 16px 0;
    }
    
    .code-header {
      background: var(--gray-700);
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .code-lang {
      font-size: 12px;
      font-weight: 600;
      color: var(--gray-300);
      text-transform: uppercase;
    }
    
    .code-copy {
      background: transparent;
      border: none;
      color: var(--gray-400);
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
    }
    
    .code-copy:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }
    
    pre {
      padding: 16px;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.6;
    }
    
    code {
      font-family: 'JetBrains Mono', monospace;
    }
    
    .code-inline {
      background: var(--gray-100);
      color: var(--primary-dark);
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 13px;
    }
    
    /* Syntax highlighting */
    .token-keyword { color: #c792ea; }
    .token-string { color: #c3e88d; }
    .token-number { color: #f78c6c; }
    .token-comment { color: #676e95; }
    .token-property { color: #82aaff; }
    .token-function { color: #82aaff; }
    .token-url { color: #89ddff; }
    
    /* Tables */
    .table-wrapper {
      overflow-x: auto;
      margin: 16px 0;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    th, td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }
    
    th {
      background: var(--gray-50);
      font-weight: 600;
      color: var(--gray-700);
    }
    
    /* Method badges */
    .method {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
    }
    
    .method-get { background: #dbeafe; color: #1d4ed8; }
    .method-post { background: #dcfce7; color: #166534; }
    .method-put { background: #fef3c7; color: #b45309; }
    .method-delete { background: #fee2e2; color: #b91c1c; }
    
    /* Endpoint */
    .endpoint {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--gray-50);
      border-radius: 10px;
      margin: 12px 0;
      border-left: 4px solid var(--primary);
    }
    
    .endpoint-path {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      color: var(--gray-700);
    }
    
    /* Alerts */
    .alert {
      padding: 16px 20px;
      border-radius: 10px;
      margin: 16px 0;
      display: flex;
      gap: 12px;
    }
    
    .alert-info {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      color: #1e40af;
    }
    
    .alert-warning {
      background: #fffbeb;
      border: 1px solid #fde68a;
      color: #b45309;
    }
    
    .alert-success {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      color: #166534;
    }
    
    .alert-icon { font-size: 20px; }
    
    /* Steps */
    .steps {
      counter-reset: step;
      margin: 24px 0;
    }
    
    .step {
      position: relative;
      padding-left: 48px;
      padding-bottom: 24px;
      border-left: 2px solid var(--gray-200);
      margin-left: 16px;
    }
    
    .step:last-child {
      border-left-color: transparent;
    }
    
    .step::before {
      counter-increment: step;
      content: counter(step);
      position: absolute;
      left: -17px;
      width: 32px;
      height: 32px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
    }
    
    .step-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--gray-900);
    }
    
    .step-content {
      color: var(--gray-600);
      font-size: 14px;
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      gap: 4px;
      border-bottom: 1px solid var(--gray-200);
      margin-bottom: 16px;
    }
    
    .tab {
      padding: 12px 20px;
      background: transparent;
      border: none;
      color: var(--gray-500);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: all 0.2s;
    }
    
    .tab:hover {
      color: var(--gray-700);
    }
    
    .tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Grid */
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    
    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }
    
    /* Feature card */
    .feature-card {
      padding: 20px;
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 12px;
      transition: all 0.2s;
    }
    
    .feature-card:hover {
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
    }
    
    .feature-icon {
      font-size: 28px;
      margin-bottom: 12px;
    }
    
    .feature-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .feature-desc {
      font-size: 13px;
      color: var(--gray-500);
    }
    
    /* Section */
    section {
      margin-bottom: 48px;
      scroll-margin-top: 100px;
    }
    
    h2 {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 16px;
      color: var(--gray-900);
    }
    
    h3 {
      font-size: 18px;
      font-weight: 700;
      margin: 24px 0 12px;
      color: var(--gray-800);
    }
    
    p {
      margin-bottom: 12px;
      color: var(--gray-600);
    }
    
    /* Mobile */
    @media (max-width: 1024px) {
      .sidebar { display: none; }
      .main { padding: 24px; }
    }
    
    @media (max-width: 768px) {
      .grid-2, .grid-3 { grid-template-columns: 1fr; }
      .header-content { flex-direction: column; gap: 16px; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a href="index.html" class="logo">
        <span class="logo-icon">‚ö°</span>
        <span class="logo-text">VeeoCore</span>
        <span class="logo-badge">API v1.3</span>
      </a>
      <nav class="nav-links">
        <a href="index.html">D√©mo</a>
        <a href="docs.html" class="active">Documentation</a>
        <a href="admin.html">Admin</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">D√©marrage</div>
        <a href="#introduction" class="sidebar-link active">
          <span class="sidebar-icon">üöÄ</span> Introduction
        </a>
        <a href="#authentication" class="sidebar-link">
          <span class="sidebar-icon">üîê</span> Authentification
        </a>
        <a href="#quickstart" class="sidebar-link">
          <span class="sidebar-icon">‚ö°</span> Quick Start
        </a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">API Client (Tenant)</div>
        <a href="#tenant-auth" class="sidebar-link">
          <span class="sidebar-icon">üë§</span> Auth Tenant Admin
        </a>
        <a href="#pricing" class="sidebar-link">
          <span class="sidebar-icon">üí∞</span> Pricing
        </a>
        <a href="#bookings" class="sidebar-link">
          <span class="sidebar-icon">üìã</span> R√©servations
        </a>
        <a href="#drivers" class="sidebar-link">
          <span class="sidebar-icon">üöó</span> Chauffeurs
        </a>
        <a href="#dispatch" class="sidebar-link">
          <span class="sidebar-icon">üìç</span> Dispatch
        </a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">App Chauffeur</div>
        <a href="#driver-auth" class="sidebar-link">
          <span class="sidebar-icon">üì±</span> Auth Chauffeur
        </a>
        <a href="#driver-api" class="sidebar-link">
          <span class="sidebar-icon">üéØ</span> API Chauffeur
        </a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">Temps R√©el</div>
        <a href="#websocket" class="sidebar-link">
          <span class="sidebar-icon">üîå</span> WebSocket
        </a>
        <a href="#webhooks" class="sidebar-link">
          <span class="sidebar-icon">üîî</span> Webhooks
        </a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">Paiements</div>
        <a href="#stripe" class="sidebar-link">
          <span class="sidebar-icon">üí≥</span> Stripe
        </a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">Ressources</div>
        <a href="#errors" class="sidebar-link">
          <span class="sidebar-icon">‚ö†Ô∏è</span> Erreurs
        </a>
        <a href="#limits" class="sidebar-link">
          <span class="sidebar-icon">üìä</span> Limites
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Introduction -->
      <section id="introduction">
        <h1 class="page-title">Documentation VeeoCore API</h1>
        <p class="page-subtitle">
          Guide complet d'int√©gration pour les exploitants VTC et leurs applications chauffeurs
        </p>
        
        <div class="grid-3">
          <div class="feature-card">
            <div class="feature-icon">üè¢</div>
            <div class="feature-title">Dashboard Tenant</div>
            <div class="feature-desc">G√©rez votre flotte, r√©servations et tarifs depuis une interface web compl√®te.</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üì±</div>
            <div class="feature-title">App Chauffeur</div>
            <div class="feature-desc">Application mobile PWA pour vos chauffeurs avec notifications temps r√©el.</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üîå</div>
            <div class="feature-title">WebSocket</div>
            <div class="feature-desc">Notifications push instantan√©es pour les nouvelles courses et mises √† jour.</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon primary">üì°</div>
            <div class="card-title">Base URL de l'API</div>
          </div>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">URL</span>
            </div>
            <pre><code class="token-url">https://api-core.veeo-stras.fr/api/v1</code></pre>
          </div>
        </div>
      </section>

      <!-- Authentication -->
      <section id="authentication">
        <h2>üîê Authentification</h2>
        <p>VeeoCore utilise deux m√©thodes d'authentification selon le contexte :</p>
        
        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <div class="card-icon primary">üîë</div>
              <div class="card-title">API Key (Int√©gration)</div>
            </div>
            <p>Pour les appels serveur-√†-serveur et l'int√©gration dans votre application.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Header</span></div>
              <pre><code><span class="token-property">X-API-Key</span>: votre_cle_api</code></pre>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-icon success">üé´</div>
              <div class="card-title">JWT Token (Sessions)</div>
            </div>
            <p>Pour les dashboards admin et applications chauffeurs connect√©s.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Header</span></div>
              <pre><code><span class="token-property">Authorization</span>: Bearer eyJhbGc...</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Quick Start -->
      <section id="quickstart">
        <h2>‚ö° Quick Start - Int√©gration en 5 minutes</h2>
        
        <div class="steps">
          <div class="step">
            <div class="step-title">Obtenez votre cl√© API</div>
            <div class="step-content">
              Contactez-nous pour obtenir vos credentials de production ou utilisez la cl√© de d√©mo.
              <div class="code-block">
                <div class="code-header"><span class="code-lang">Cl√© de d√©mo</span></div>
                <pre><code>X-API-Key: demo_key_2024</code></pre>
              </div>
            </div>
          </div>
          
          <div class="step">
            <div class="step-title">Calculez un prix</div>
            <div class="step-content">
              <div class="code-block">
                <div class="code-header"><span class="code-lang">cURL</span></div>
                <pre><code>curl -X POST https://api-core.veeo-stras.fr/api/v1/pricing/quote \
  -H "<span class="token-property">Content-Type</span>: application/json" \
  -H "<span class="token-property">X-API-Key</span>: <span class="token-string">demo_key_2024</span>" \
  -d '{
    "<span class="token-property">distanceKm</span>": <span class="token-number">15.2</span>,
    "<span class="token-property">durationMin</span>": <span class="token-number">22</span>,
    "<span class="token-property">vehicleType</span>": "<span class="token-string">standard</span>"
  }'</code></pre>
              </div>
            </div>
          </div>
          
          <div class="step">
            <div class="step-title">Cr√©ez une r√©servation</div>
            <div class="step-content">
              <div class="code-block">
                <div class="code-header"><span class="code-lang">cURL</span></div>
                <pre><code>curl -X POST https://api-core.veeo-stras.fr/api/v1/bookings \
  -H "<span class="token-property">Content-Type</span>: application/json" \
  -H "<span class="token-property">X-API-Key</span>: <span class="token-string">votre_cle_api</span>" \
  -d '{
    "<span class="token-property">customerName</span>": "<span class="token-string">Jean Dupont</span>",
    "<span class="token-property">customerPhone</span>": "<span class="token-string">+33612345678</span>",
    "<span class="token-property">pickup</span>": { "address": "Gare de Strasbourg", "lat": 48.585, "lng": 7.735 },
    "<span class="token-property">dropoff</span>": { "address": "A√©roport Entzheim", "lat": 48.538, "lng": 7.628 },
    "<span class="token-property">vehicleType</span>": "<span class="token-string">standard</span>",
    "<span class="token-property">estimatedPrice</span>": <span class="token-number">35.50</span>,
    "<span class="token-property">estimatedDistance</span>": <span class="token-number">15.2</span>,
    "<span class="token-property">estimatedDuration</span>": <span class="token-number">22</span>
  }'</code></pre>
              </div>
            </div>
          </div>
          
          <div class="step">
            <div class="step-title">Connectez-vous au WebSocket</div>
            <div class="step-content">
              <div class="code-block">
                <div class="code-header"><span class="code-lang">JavaScript</span></div>
                <pre><code><span class="token-keyword">import</span> { io } <span class="token-keyword">from</span> '<span class="token-string">socket.io-client</span>';

<span class="token-keyword">const</span> socket = io('<span class="token-string">https://api-core.veeo-stras.fr</span>', {
  auth: { token: '<span class="token-string">votre_jwt_token</span>' }
});

socket.on('<span class="token-string">booking:new</span>', (data) => {
  console.<span class="token-function">log</span>('Nouvelle course:', data);
});</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Tenant Auth -->
      <section id="tenant-auth">
        <h2>üë§ Authentification Tenant Admin</h2>
        <p>Endpoints pour connecter les administrateurs de votre soci√©t√© VTC au dashboard.</p>
        
        <h3>Login Tenant Admin</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/auth/tenant/login</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request Body</span></div>
          <pre><code>{
  "<span class="token-property">email</span>": "<span class="token-string">admin@votresociete.fr</span>",
  "<span class="token-property">password</span>": "<span class="token-string">votre_mot_de_passe</span>"
}</code></pre>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response 200</span></div>
          <pre><code>{
  "<span class="token-property">success</span>": <span class="token-keyword">true</span>,
  "<span class="token-property">token</span>": "<span class="token-string">eyJhbGciOiJIUzI1NiIs...</span>",
  "<span class="token-property">admin</span>": {
    "<span class="token-property">id</span>": "<span class="token-string">uuid</span>",
    "<span class="token-property">email</span>": "<span class="token-string">admin@votresociete.fr</span>",
    "<span class="token-property">name</span>": "<span class="token-string">Jean Admin</span>",
    "<span class="token-property">role</span>": "<span class="token-string">owner</span>"
  },
  "<span class="token-property">tenant</span>": {
    "<span class="token-property">id</span>": "<span class="token-string">uuid</span>",
    "<span class="token-property">name</span>": "<span class="token-string">Ma Soci√©t√© VTC</span>",
    "<span class="token-property">plan</span>": "<span class="token-string">pro</span>"
  }
}</code></pre>
        </div>
        
        <div class="alert alert-info">
          <span class="alert-icon">‚ÑπÔ∏è</span>
          <div>Le token JWT est valide 7 jours. Stockez-le de mani√®re s√©curis√©e c√¥t√© client.</div>
        </div>
      </section>

      <!-- Pricing -->
      <section id="pricing">
        <h2>üí∞ Pricing API</h2>
        
        <h3>Calculer un devis</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/pricing/quote</span>
        </div>
        
        <div class="table-wrapper">
          <table>
            <thead>
              <tr><th>Param√®tre</th><th>Type</th><th>Requis</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr><td><code class="code-inline">distanceKm</code></td><td>number</td><td>‚úÖ</td><td>Distance en kilom√®tres</td></tr>
              <tr><td><code class="code-inline">durationMin</code></td><td>number</td><td>‚úÖ</td><td>Dur√©e estim√©e en minutes</td></tr>
              <tr><td><code class="code-inline">vehicleType</code></td><td>string</td><td>‚úÖ</td><td>standard | premium | van</td></tr>
              <tr><td><code class="code-inline">pickupTime</code></td><td>ISO 8601</td><td>‚ùå</td><td>Heure de prise en charge (surge pricing)</td></tr>
              <tr><td><code class="code-inline">passengers</code></td><td>number</td><td>‚ùå</td><td>Nombre de passagers (d√©faut: 1)</td></tr>
            </tbody>
          </table>
        </div>
        
        <h3>Calculer tous les v√©hicules</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/pricing/calculate</span>
        </div>
        <p>Retourne les prix pour tous les types de v√©hicules disponibles.</p>
      </section>

      <!-- Bookings -->
      <section id="bookings">
        <h2>üìã R√©servations</h2>
        
        <h3>Cr√©er une r√©servation</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/bookings</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request Body</span></div>
          <pre><code>{
  "<span class="token-property">customerName</span>": "<span class="token-string">Jean Dupont</span>",
  "<span class="token-property">customerPhone</span>": "<span class="token-string">+33612345678</span>",
  "<span class="token-property">customerEmail</span>": "<span class="token-string">jean@email.com</span>",
  "<span class="token-property">pickup</span>": {
    "<span class="token-property">address</span>": "<span class="token-string">10 Place Kl√©ber, 67000 Strasbourg</span>",
    "<span class="token-property">lat</span>": <span class="token-number">48.5839</span>,
    "<span class="token-property">lng</span>": <span class="token-number">7.7455</span>
  },
  "<span class="token-property">dropoff</span>": {
    "<span class="token-property">address</span>": "<span class="token-string">A√©roport de Strasbourg</span>",
    "<span class="token-property">lat</span>": <span class="token-number">48.5383</span>,
    "<span class="token-property">lng</span>": <span class="token-number">7.6281</span>
  },
  "<span class="token-property">vehicleType</span>": "<span class="token-string">standard</span>",
  "<span class="token-property">passengers</span>": <span class="token-number">2</span>,
  "<span class="token-property">luggage</span>": <span class="token-number">1</span>,
  "<span class="token-property">scheduledFor</span>": "<span class="token-string">2026-02-05T14:30:00Z</span>",
  "<span class="token-property">estimatedPrice</span>": <span class="token-number">35.50</span>,
  "<span class="token-property">estimatedDistance</span>": <span class="token-number">15.2</span>,
  "<span class="token-property">estimatedDuration</span>": <span class="token-number">22</span>,
  "<span class="token-property">paymentMethod</span>": "<span class="token-string">card</span>"
}</code></pre>
        </div>
        
        <h3>Lister les r√©servations</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/bookings?status=pending&amp;limit=20</span>
        </div>
        
        <h3>Assigner un chauffeur</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/bookings/:id/assign</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{ "<span class="token-property">driverId</span>": "<span class="token-string">driver-uuid</span>" }</code></pre>
        </div>
        
        <h3>Statuts de r√©servation</h3>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>Statut</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code class="code-inline">pending</code></td><td>En attente de traitement</td></tr>
              <tr><td><code class="code-inline">scheduled</code></td><td>Programm√©e</td></tr>
              <tr><td><code class="code-inline">dispatching</code></td><td>Recherche de chauffeur</td></tr>
              <tr><td><code class="code-inline">assigned</code></td><td>Chauffeur assign√©</td></tr>
              <tr><td><code class="code-inline">driver_en_route</code></td><td>Chauffeur en route</td></tr>
              <tr><td><code class="code-inline">driver_arrived</code></td><td>Chauffeur arriv√©</td></tr>
              <tr><td><code class="code-inline">in_progress</code></td><td>Course en cours</td></tr>
              <tr><td><code class="code-inline">completed</code></td><td>Termin√©e</td></tr>
              <tr><td><code class="code-inline">cancelled</code></td><td>Annul√©e</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Drivers -->
      <section id="drivers">
        <h2>üöó Gestion des Chauffeurs (Admin)</h2>
        
        <h3>Lister les chauffeurs</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/drivers</span>
        </div>
        
        <h3>Cr√©er un chauffeur</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/drivers</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">name</span>": "<span class="token-string">Pierre Martin</span>",
  "<span class="token-property">phone</span>": "<span class="token-string">+33612345678</span>",
  "<span class="token-property">email</span>": "<span class="token-string">pierre@email.com</span>",
  "<span class="token-property">vehicleType</span>": "<span class="token-string">standard</span>",
  "<span class="token-property">vehiclePlate</span>": "<span class="token-string">AB-123-CD</span>",
  "<span class="token-property">vehicleModel</span>": "<span class="token-string">Mercedes Classe E</span>",
  "<span class="token-property">pin</span>": "<span class="token-string">1234</span>"
}</code></pre>
        </div>
        
        <h3>Obtenir la position des chauffeurs</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/drivers/locations</span>
        </div>
        <p>Retourne les positions GPS en temps r√©el de tous les chauffeurs actifs.</p>
      </section>

      <!-- Dispatch -->
      <section id="dispatch">
        <h2>üìç Auto-Dispatch</h2>
        <p>Le syst√®me de dispatch automatique trouve le meilleur chauffeur disponible.</p>
        
        <h3>Lancer un dispatch automatique</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/dispatch/auto</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">bookingId</span>": "<span class="token-string">booking-uuid</span>",
  "<span class="token-property">maxRadius</span>": <span class="token-number">10</span>,  <span class="token-comment">// km (optionnel)</span>
  "<span class="token-property">timeout</span>": <span class="token-number">120</span>      <span class="token-comment">// secondes (optionnel)</span>
}</code></pre>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response</span></div>
          <pre><code>{
  "<span class="token-property">success</span>": <span class="token-keyword">true</span>,
  "<span class="token-property">dispatchId</span>": "<span class="token-string">dispatch-uuid</span>",
  "<span class="token-property">candidateDrivers</span>": [
    {
      "<span class="token-property">driverId</span>": "<span class="token-string">uuid</span>",
      "<span class="token-property">name</span>": "<span class="token-string">Pierre</span>",
      "<span class="token-property">distance</span>": <span class="token-number">2.3</span>,
      "<span class="token-property">eta</span>": <span class="token-number">5</span>
    }
  ],
  "<span class="token-property">status</span>": "<span class="token-string">searching</span>"
}</code></pre>
        </div>
        
        <h3>V√©rifier le statut du dispatch</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/dispatch/:dispatchId/status</span>
        </div>
        
        <h3>Trouver les chauffeurs proches</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/dispatch/nearby</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">lat</span>": <span class="token-number">48.5839</span>,
  "<span class="token-property">lng</span>": <span class="token-number">7.7455</span>,
  "<span class="token-property">radius</span>": <span class="token-number">5</span>,
  "<span class="token-property">vehicleType</span>": "<span class="token-string">standard</span>"
}</code></pre>
        </div>
      </section>

      <!-- Driver Auth -->
      <section id="driver-auth">
        <h2>üì± Authentification Chauffeur</h2>
        <p>Endpoints pour l'application mobile chauffeur.</p>
        
        <h3>Login Chauffeur (T√©l√©phone + PIN)</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/auth/driver/login</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">phone</span>": "<span class="token-string">+33612345678</span>",
  "<span class="token-property">pin</span>": "<span class="token-string">1234</span>"
}</code></pre>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response 200</span></div>
          <pre><code>{
  "<span class="token-property">success</span>": <span class="token-keyword">true</span>,
  "<span class="token-property">token</span>": "<span class="token-string">eyJhbGciOiJIUzI1NiIs...</span>",
  "<span class="token-property">driver</span>": {
    "<span class="token-property">id</span>": "<span class="token-string">driver-uuid</span>",
    "<span class="token-property">name</span>": "<span class="token-string">Pierre Martin</span>",
    "<span class="token-property">phone</span>": "<span class="token-string">+33612345678</span>",
    "<span class="token-property">status</span>": "<span class="token-string">available</span>",
    "<span class="token-property">vehicle_type</span>": "<span class="token-string">standard</span>",
    "<span class="token-property">vehicle_plate</span>": "<span class="token-string">AB-123-CD</span>",
    "<span class="token-property">rating</span>": <span class="token-number">4.8</span>
  }
}</code></pre>
        </div>
        
        <div class="alert alert-info">
          <span class="alert-icon">üì±</span>
          <div>Le token chauffeur est valide 30 jours. Il doit √™tre renouvel√© automatiquement.</div>
        </div>
      </section>

      <!-- Driver API -->
      <section id="driver-api">
        <h2>üéØ API Chauffeur</h2>
        <p>Tous les endpoints n√©cessitent un token JWT chauffeur valide.</p>
        
        <h3>Obtenir le profil</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/driver/profile</span>
        </div>
        
        <h3>Mettre √† jour le statut</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/driver/status</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{ "<span class="token-property">status</span>": "<span class="token-string">available</span>" }  <span class="token-comment">// available | busy | offline</span></code></pre>
        </div>
        
        <h3>Mettre √† jour la position</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/driver/location</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">lat</span>": <span class="token-number">48.5839</span>,
  "<span class="token-property">lng</span>": <span class="token-number">7.7455</span>
}</code></pre>
        </div>
        
        <h3>Obtenir la course en cours</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/driver/current-booking</span>
        </div>
        
        <h3>Accepter une course</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/driver/bookings/:id/accept</span>
        </div>
        
        <h3>Refuser une course</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/driver/bookings/:id/decline</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{ "<span class="token-property">reason</span>": "<span class="token-string">trop_loin</span>" }</code></pre>
        </div>
        
        <h3>Mettre √† jour le statut d'une course</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/driver/bookings/:id/status</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{ "<span class="token-property">status</span>": "<span class="token-string">driver_arrived</span>" }</code></pre>
        </div>
        
        <div class="table-wrapper">
          <table>
            <thead><tr><th>Statut</th><th>Description</th><th>Prochain statut possible</th></tr></thead>
            <tbody>
              <tr><td><code class="code-inline">assigned</code></td><td>Course assign√©e</td><td>driver_en_route</td></tr>
              <tr><td><code class="code-inline">driver_en_route</code></td><td>En route vers le client</td><td>driver_arrived</td></tr>
              <tr><td><code class="code-inline">driver_arrived</code></td><td>Arriv√© au point de prise en charge</td><td>in_progress</td></tr>
              <tr><td><code class="code-inline">in_progress</code></td><td>Course en cours</td><td>completed</td></tr>
              <tr><td><code class="code-inline">completed</code></td><td>Course termin√©e</td><td>-</td></tr>
            </tbody>
          </table>
        </div>
        
        <h3>Historique des courses</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/driver/bookings?status=completed&amp;limit=20</span>
        </div>
        
        <h3>Statistiques du chauffeur</h3>
        <div class="endpoint">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/api/v1/driver/stats</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response</span></div>
          <pre><code>{
  "<span class="token-property">today</span>": { "<span class="token-property">trips</span>": <span class="token-number">5</span>, "<span class="token-property">earnings</span>": <span class="token-number">175.50</span>, "<span class="token-property">hours</span>": <span class="token-number">4.5</span> },
  "<span class="token-property">week</span>": { "<span class="token-property">trips</span>": <span class="token-number">28</span>, "<span class="token-property">earnings</span>": <span class="token-number">980.00</span>, "<span class="token-property">hours</span>": <span class="token-number">32</span> },
  "<span class="token-property">month</span>": { "<span class="token-property">trips</span>": <span class="token-number">112</span>, "<span class="token-property">earnings</span>": <span class="token-number">4200.00</span>, "<span class="token-property">hours</span>": <span class="token-number">145</span> },
  "<span class="token-property">rating</span>": <span class="token-number">4.85</span>,
  "<span class="token-property">acceptanceRate</span>": <span class="token-number">0.92</span>
}</code></pre>
        </div>
      </section>

      <!-- WebSocket -->
      <section id="websocket">
        <h2>üîå WebSocket - Temps R√©el</h2>
        <p>Connectez-vous au WebSocket pour recevoir les notifications en temps r√©el.</p>
        
        <div class="alert alert-success">
          <span class="alert-icon">‚úÖ</span>
          <div>WebSocket URL: <code class="code-inline">wss://api-core.veeo-stras.fr</code></div>
        </div>
        
        <h3>Connexion (JavaScript)</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">JavaScript</span></div>
          <pre><code><span class="token-keyword">import</span> { io } <span class="token-keyword">from</span> '<span class="token-string">socket.io-client</span>';

<span class="token-comment">// Connexion avec authentification JWT</span>
<span class="token-keyword">const</span> socket = io('<span class="token-string">https://api-core.veeo-stras.fr</span>', {
  auth: { token: '<span class="token-string">votre_jwt_token</span>' },
  transports: ['<span class="token-string">websocket</span>', '<span class="token-string">polling</span>']
});

<span class="token-comment">// √âv√©nement de connexion r√©ussie</span>
socket.on('<span class="token-string">connected</span>', (data) => {
  console.<span class="token-function">log</span>('Connect√©:', data);
});

<span class="token-comment">// Gestion des erreurs</span>
socket.on('<span class="token-string">connect_error</span>', (err) => {
  console.<span class="token-function">error</span>('Erreur:', err.message);
});</code></pre>
        </div>
        
        <h3>√âv√©nements Chauffeur</h3>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>√âv√©nement</th><th>Description</th><th>Donn√©es</th></tr></thead>
            <tbody>
              <tr>
                <td><code class="code-inline">booking:new</code></td>
                <td>Nouvelle course disponible</td>
                <td>bookingId, pickupAddress, dropoffAddress, estimatedPrice</td>
              </tr>
              <tr>
                <td><code class="code-inline">booking:assigned</code></td>
                <td>Course assign√©e au chauffeur</td>
                <td>bookingId, pickupAddress, passengerName, passengerPhone</td>
              </tr>
              <tr>
                <td><code class="code-inline">booking:cancelled</code></td>
                <td>Course annul√©e</td>
                <td>bookingId, reason</td>
              </tr>
              <tr>
                <td><code class="code-inline">dispatch:request</code></td>
                <td>Demande de dispatch re√ßue</td>
                <td>dispatchId, bookingId, pickup, dropoff, timeout</td>
              </tr>
              <tr>
                <td><code class="code-inline">message:received</code></td>
                <td>Message de l'admin</td>
                <td>message, from, timestamp</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <h3>√âv√©nements Admin</h3>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>√âv√©nement</th><th>Description</th><th>Donn√©es</th></tr></thead>
            <tbody>
              <tr>
                <td><code class="code-inline">driver:location_updated</code></td>
                <td>Position d'un chauffeur mise √† jour</td>
                <td>driverId, location {lat, lng}, timestamp</td>
              </tr>
              <tr>
                <td><code class="code-inline">driver:status_changed</code></td>
                <td>Statut d'un chauffeur chang√©</td>
                <td>driverId, status, timestamp</td>
              </tr>
              <tr>
                <td><code class="code-inline">booking:created</code></td>
                <td>Nouvelle r√©servation cr√©√©e</td>
                <td>bookingId, customerName, pickup, dropoff</td>
              </tr>
              <tr>
                <td><code class="code-inline">booking:status_changed</code></td>
                <td>Statut d'une r√©servation chang√©</td>
                <td>bookingId, status, driverId</td>
              </tr>
              <tr>
                <td><code class="code-inline">dispatch:completed</code></td>
                <td>Dispatch termin√©</td>
                <td>bookingId, driverId, status</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <h3>Exemple complet - App Chauffeur</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">JavaScript</span></div>
          <pre><code><span class="token-keyword">import</span> { io } <span class="token-keyword">from</span> '<span class="token-string">socket.io-client</span>';

<span class="token-keyword">class</span> DriverSocket {
  <span class="token-function">constructor</span>(token) {
    <span class="token-keyword">this</span>.socket = io('<span class="token-string">https://api-core.veeo-stras.fr</span>', {
      auth: { token },
      transports: ['<span class="token-string">websocket</span>', '<span class="token-string">polling</span>'],
      reconnection: <span class="token-keyword">true</span>,
      reconnectionAttempts: <span class="token-number">10</span>
    });
    
    <span class="token-keyword">this</span>.<span class="token-function">setupListeners</span>();
  }
  
  <span class="token-function">setupListeners</span>() {
    <span class="token-comment">// Connexion r√©ussie</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">connected</span>', (data) => {
      console.<span class="token-function">log</span>('‚úÖ Connect√© au serveur:', data.driverId);
    });
    
    <span class="token-comment">// Nouvelle course disponible</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">booking:new</span>', (booking) => {
      <span class="token-keyword">this</span>.<span class="token-function">showNotification</span>('Nouvelle course', booking.pickupAddress);
    });
    
    <span class="token-comment">// Course assign√©e</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">booking:assigned</span>', (data) => {
      <span class="token-keyword">this</span>.<span class="token-function">navigateToBooking</span>(data.bookingId);
    });
    
    <span class="token-comment">// Demande de dispatch</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">dispatch:request</span>', (data) => {
      <span class="token-keyword">this</span>.<span class="token-function">showDispatchModal</span>(data);
    });
  }
  
  <span class="token-comment">// Envoyer sa position</span>
  <span class="token-function">updateLocation</span>(lat, lng) {
    <span class="token-keyword">this</span>.socket.<span class="token-function">emit</span>('<span class="token-string">location:update</span>', { lat, lng });
  }
  
  <span class="token-comment">// Changer son statut</span>
  <span class="token-function">setStatus</span>(status) {
    <span class="token-keyword">this</span>.socket.<span class="token-function">emit</span>('<span class="token-string">status:change</span>', { status });
  }
  
  <span class="token-comment">// Accepter une course</span>
  <span class="token-function">acceptBooking</span>(bookingId) {
    <span class="token-keyword">this</span>.socket.<span class="token-function">emit</span>('<span class="token-string">booking:accept</span>', { bookingId });
  }
}

<span class="token-comment">// Utilisation</span>
<span class="token-keyword">const</span> driverSocket = <span class="token-keyword">new</span> DriverSocket(authToken);
driverSocket.<span class="token-function">setStatus</span>('<span class="token-string">available</span>');</code></pre>
        </div>
        
        <h3>Exemple complet - Dashboard Admin</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">JavaScript</span></div>
          <pre><code><span class="token-keyword">import</span> { io } <span class="token-keyword">from</span> '<span class="token-string">socket.io-client</span>';

<span class="token-keyword">class</span> AdminSocket {
  <span class="token-function">constructor</span>(token) {
    <span class="token-keyword">this</span>.socket = io('<span class="token-string">https://api-core.veeo-stras.fr</span>', {
      auth: { token }
    });
    
    <span class="token-keyword">this</span>.drivers = <span class="token-keyword">new</span> Map();
    <span class="token-keyword">this</span>.<span class="token-function">setupListeners</span>();
  }
  
  <span class="token-function">setupListeners</span>() {
    <span class="token-comment">// Position chauffeur mise √† jour</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">driver:location_updated</span>', (data) => {
      <span class="token-keyword">this</span>.drivers.<span class="token-function">set</span>(data.driverId, data.location);
      <span class="token-keyword">this</span>.<span class="token-function">updateMap</span>();
    });
    
    <span class="token-comment">// Statut chauffeur chang√©</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">driver:status_changed</span>', (data) => {
      <span class="token-keyword">this</span>.<span class="token-function">updateDriverStatus</span>(data.driverId, data.status);
    });
    
    <span class="token-comment">// Nouvelle r√©servation</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">booking:created</span>', (booking) => {
      <span class="token-keyword">this</span>.<span class="token-function">addBookingToList</span>(booking);
      <span class="token-keyword">this</span>.<span class="token-function">playNotificationSound</span>();
    });
    
    <span class="token-comment">// Dispatch termin√©</span>
    <span class="token-keyword">this</span>.socket.on('<span class="token-string">dispatch:completed</span>', (data) => {
      <span class="token-keyword">this</span>.<span class="token-function">updateBookingAssignment</span>(data.bookingId, data.driverId);
    });
  }
}</code></pre>
        </div>
      </section>

      <!-- Webhooks -->
      <section id="webhooks">
        <h2>üîî Webhooks</h2>
        <p>Recevez des notifications HTTP sur vos serveurs pour les √©v√©nements importants.</p>
        
        <h3>Configuration</h3>
        <p>Configurez votre URL de webhook dans le dashboard admin ou via l'API.</p>
        
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/settings/webhooks</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">url</span>": "<span class="token-string">https://votre-serveur.com/webhook/veeocore</span>",
  "<span class="token-property">events</span>": ["<span class="token-string">booking.created</span>", "<span class="token-string">booking.completed</span>", "<span class="token-string">payment.received</span>"],
  "<span class="token-property">secret</span>": "<span class="token-string">votre_secret_hmac</span>"
}</code></pre>
        </div>
        
        <h3>Payload Webhook</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">POST votre-serveur.com/webhook</span></div>
          <pre><code>{
  "<span class="token-property">event</span>": "<span class="token-string">booking.created</span>",
  "<span class="token-property">timestamp</span>": "<span class="token-string">2026-02-04T14:30:00Z</span>",
  "<span class="token-property">tenantId</span>": "<span class="token-string">tenant-uuid</span>",
  "<span class="token-property">data</span>": {
    "<span class="token-property">bookingId</span>": "<span class="token-string">booking-uuid</span>",
    "<span class="token-property">status</span>": "<span class="token-string">pending</span>",
    "<span class="token-property">customerName</span>": "<span class="token-string">Jean Dupont</span>",
    "<span class="token-property">pickup</span>": { ... },
    "<span class="token-property">dropoff</span>": { ... }
  }
}</code></pre>
        </div>
        
        <h3>V√©rification de signature</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Node.js</span></div>
          <pre><code><span class="token-keyword">const</span> crypto = require('<span class="token-string">crypto</span>');

<span class="token-keyword">function</span> <span class="token-function">verifyWebhook</span>(payload, signature, secret) {
  <span class="token-keyword">const</span> expected = crypto
    .<span class="token-function">createHmac</span>('<span class="token-string">sha256</span>', secret)
    .<span class="token-function">update</span>(JSON.<span class="token-function">stringify</span>(payload))
    .<span class="token-function">digest</span>('<span class="token-string">hex</span>');
  
  <span class="token-keyword">return</span> crypto.<span class="token-function">timingSafeEqual</span>(
    Buffer.<span class="token-function">from</span>(signature),
    Buffer.<span class="token-function">from</span>(expected)
  );
}</code></pre>
        </div>
        
        <h3>√âv√©nements disponibles</h3>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>√âv√©nement</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><code class="code-inline">booking.created</code></td><td>Nouvelle r√©servation cr√©√©e</td></tr>
              <tr><td><code class="code-inline">booking.assigned</code></td><td>Chauffeur assign√© √† une course</td></tr>
              <tr><td><code class="code-inline">booking.started</code></td><td>Course d√©marr√©e</td></tr>
              <tr><td><code class="code-inline">booking.completed</code></td><td>Course termin√©e</td></tr>
              <tr><td><code class="code-inline">booking.cancelled</code></td><td>Course annul√©e</td></tr>
              <tr><td><code class="code-inline">payment.received</code></td><td>Paiement re√ßu</td></tr>
              <tr><td><code class="code-inline">payment.failed</code></td><td>Paiement √©chou√©</td></tr>
              <tr><td><code class="code-inline">driver.status_changed</code></td><td>Statut chauffeur modifi√©</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Stripe -->
      <section id="stripe">
        <h2>üí≥ Int√©gration Stripe</h2>
        <p>VeeoCore g√®re les paiements via Stripe avec support pour Stripe Connect.</p>
        
        <h3>Flux de paiement</h3>
        <div class="steps">
          <div class="step">
            <div class="step-title">Cr√©er un PaymentIntent</div>
            <div class="step-content">Appelez l'API pour cr√©er une intention de paiement Stripe.</div>
          </div>
          <div class="step">
            <div class="step-title">Confirmer c√¥t√© client</div>
            <div class="step-content">Utilisez Stripe.js pour confirmer le paiement avec la carte du client.</div>
          </div>
          <div class="step">
            <div class="step-title">Webhook de confirmation</div>
            <div class="step-content">Stripe envoie un webhook, VeeoCore met √† jour le statut de la r√©servation.</div>
          </div>
        </div>
        
        <h3>Cr√©er un PaymentIntent</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/stripe/create-payment-intent</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">bookingId</span>": "<span class="token-string">booking-uuid</span>",
  "<span class="token-property">amount</span>": <span class="token-number">3550</span>,  <span class="token-comment">// en centimes (35.50‚Ç¨)</span>
  "<span class="token-property">currency</span>": "<span class="token-string">eur</span>"
}</code></pre>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response</span></div>
          <pre><code>{
  "<span class="token-property">clientSecret</span>": "<span class="token-string">pi_xxx_secret_xxx</span>",
  "<span class="token-property">paymentIntentId</span>": "<span class="token-string">pi_xxx</span>"
}</code></pre>
        </div>
        
        <h3>Confirmation c√¥t√© client</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">JavaScript (Stripe.js)</span></div>
          <pre><code><span class="token-keyword">const</span> stripe = Stripe('<span class="token-string">pk_live_xxx</span>');

<span class="token-keyword">const</span> { error, paymentIntent } = <span class="token-keyword">await</span> stripe.<span class="token-function">confirmCardPayment</span>(
  clientSecret,
  {
    payment_method: {
      card: cardElement,
      billing_details: { name: '<span class="token-string">Jean Dupont</span>' }
    }
  }
);

<span class="token-keyword">if</span> (error) {
  console.<span class="token-function">error</span>(error.message);
} <span class="token-keyword">else</span> <span class="token-keyword">if</span> (paymentIntent.status === '<span class="token-string">succeeded</span>') {
  console.<span class="token-function">log</span>('Paiement r√©ussi!');
}</code></pre>
        </div>
        
        <h3>Webhook Stripe</h3>
        <p>Configurez votre endpoint Stripe webhook dans le dashboard Stripe :</p>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">URL Webhook</span></div>
          <pre><code>https://api-core.veeo-stras.fr/api/v1/stripe/webhook/{tenantId}</code></pre>
        </div>
        
        <div class="alert alert-warning">
          <span class="alert-icon">‚ö†Ô∏è</span>
          <div>N'oubliez pas de configurer le secret du webhook dans vos param√®tres tenant.</div>
        </div>
        
        <h3>Remboursement</h3>
        <div class="endpoint">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/api/v1/stripe/refund</span>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Request</span></div>
          <pre><code>{
  "<span class="token-property">bookingId</span>": "<span class="token-string">booking-uuid</span>",
  "<span class="token-property">amount</span>": <span class="token-number">1500</span>,  <span class="token-comment">// remboursement partiel (optionnel)</span>
  "<span class="token-property">reason</span>": "<span class="token-string">customer_request</span>"
}</code></pre>
        </div>
      </section>

      <!-- Errors -->
      <section id="errors">
        <h2>‚ö†Ô∏è Codes d'erreur</h2>
        
        <div class="table-wrapper">
          <table>
            <thead><tr><th>Code HTTP</th><th>Erreur</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td>400</td><td>VALIDATION_ERROR</td><td>Param√®tres invalides</td></tr>
              <tr><td>401</td><td>UNAUTHORIZED</td><td>Token manquant ou invalide</td></tr>
              <tr><td>403</td><td>FORBIDDEN</td><td>Acc√®s non autoris√© √† cette ressource</td></tr>
              <tr><td>404</td><td>NOT_FOUND</td><td>Ressource introuvable</td></tr>
              <tr><td>409</td><td>CONFLICT</td><td>Conflit (ex: chauffeur d√©j√† assign√©)</td></tr>
              <tr><td>422</td><td>UNPROCESSABLE</td><td>Donn√©es valides mais non traitables</td></tr>
              <tr><td>429</td><td>RATE_LIMITED</td><td>Trop de requ√™tes</td></tr>
              <tr><td>500</td><td>SERVER_ERROR</td><td>Erreur serveur interne</td></tr>
            </tbody>
          </table>
        </div>
        
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Format d'erreur standard</span></div>
          <pre><code>{
  "<span class="token-property">error</span>": "<span class="token-string">VALIDATION_ERROR</span>",
  "<span class="token-property">message</span>": "<span class="token-string">Invalid booking data</span>",
  "<span class="token-property">details</span>": [
    { "<span class="token-property">field</span>": "<span class="token-string">customerPhone</span>", "<span class="token-property">message</span>": "<span class="token-string">Required</span>" },
    { "<span class="token-property">field</span>": "<span class="token-string">pickup.lat</span>", "<span class="token-property">message</span>": "<span class="token-string">Must be a valid latitude</span>" }
  ]
}</code></pre>
        </div>
        
        <h3>Gestion recommand√©e</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">JavaScript</span></div>
          <pre><code><span class="token-keyword">try</span> {
  <span class="token-keyword">const</span> response = <span class="token-keyword">await</span> <span class="token-function">fetch</span>('/api/v1/bookings', {
    method: '<span class="token-string">POST</span>',
    headers: { '<span class="token-string">Authorization</span>': `Bearer ${token}` },
    body: JSON.<span class="token-function">stringify</span>(bookingData)
  });
  
  <span class="token-keyword">if</span> (!response.ok) {
    <span class="token-keyword">const</span> error = <span class="token-keyword">await</span> response.<span class="token-function">json</span>();
    
    <span class="token-keyword">if</span> (response.status === <span class="token-number">401</span>) {
      <span class="token-comment">// Token expir√© ‚Üí refresh ou re-login</span>
      <span class="token-keyword">await</span> <span class="token-function">refreshToken</span>();
    } <span class="token-keyword">else</span> <span class="token-keyword">if</span> (response.status === <span class="token-number">429</span>) {
      <span class="token-comment">// Rate limited ‚Üí attendre et r√©essayer</span>
      <span class="token-keyword">await</span> <span class="token-function">sleep</span>(<span class="token-number">60000</span>);
    } <span class="token-keyword">else</span> {
      <span class="token-comment">// Afficher l'erreur √† l'utilisateur</span>
      <span class="token-function">showError</span>(error.message);
    }
  }
} <span class="token-keyword">catch</span> (e) {
  console.<span class="token-function">error</span>('<span class="token-string">Network error</span>', e);
}</code></pre>
        </div>
      </section>

      <!-- Limits -->
      <section id="limits">
        <h2>üìä Limites et quotas</h2>
        
        <h3>Limites par plan</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr><th>Fonctionnalit√©</th><th>Starter</th><th>Pro</th><th>Business</th><th>Enterprise</th></tr>
            </thead>
            <tbody>
              <tr><td>Requ√™tes API/minute</td><td>60</td><td>200</td><td>1000</td><td>Illimit√©</td></tr>
              <tr><td>V√©hicules</td><td>3</td><td>10</td><td>50</td><td>Illimit√©</td></tr>
              <tr><td>Chauffeurs</td><td>5</td><td>20</td><td>100</td><td>Illimit√©</td></tr>
              <tr><td>Admins</td><td>1</td><td>3</td><td>10</td><td>Illimit√©</td></tr>
              <tr><td>WebSocket</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td></tr>
              <tr><td>Webhooks</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td></tr>
              <tr><td>Auto-dispatch</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td></tr>
              <tr><td>Analytics avanc√©s</td><td>‚ùå</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td></tr>
              <tr><td>API White-label</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚úÖ</td></tr>
              <tr><td>Support</td><td>Email</td><td>Email + Chat</td><td>Prioritaire</td><td>D√©di√© 24/7</td></tr>
            </tbody>
          </table>
        </div>
        
        <div class="alert alert-warning">
          <span class="alert-icon">‚ö†Ô∏è</span>
          <div>En cas de d√©passement des limites, vous recevrez une erreur <code class="code-inline">429 RATE_LIMITED</code> avec un header <code class="code-inline">Retry-After</code> indiquant le temps d'attente en secondes.</div>
        </div>
        
        <h3>Headers de limite</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">Response Headers</span></div>
          <pre><code>X-RateLimit-Limit: <span class="token-number">200</span>
X-RateLimit-Remaining: <span class="token-number">150</span>
X-RateLimit-Reset: <span class="token-number">1707062400</span></code></pre>
        </div>
      </section>
      
      <!-- SDK Section -->
      <section id="sdks">
        <h2>üì¶ SDKs & Biblioth√®ques</h2>
        
        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <div class="card-icon primary">üü®</div>
              <div class="card-title">JavaScript / TypeScript</div>
            </div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">npm</span></div>
              <pre><code>npm install @veeocore/sdk</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Usage</span></div>
              <pre><code><span class="token-keyword">import</span> { VeeoCore } <span class="token-keyword">from</span> '<span class="token-string">@veeocore/sdk</span>';

<span class="token-keyword">const</span> client = <span class="token-keyword">new</span> VeeoCore({
  apiKey: '<span class="token-string">votre_cle_api</span>'
});

<span class="token-keyword">const</span> quote = <span class="token-keyword">await</span> client.pricing.<span class="token-function">getQuote</span>({
  distanceKm: <span class="token-number">15</span>,
  vehicleType: '<span class="token-string">standard</span>'
});</code></pre>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-icon success">üì±</div>
              <div class="card-title">React Native</div>
            </div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">npm</span></div>
              <pre><code>npm install @veeocore/react-native</code></pre>
            </div>
            <p style="margin-top: 12px;">Hooks React pr√™ts √† l'emploi pour l'app chauffeur : <code class="code-inline">useDriverSocket</code>, <code class="code-inline">useLocation</code>, <code class="code-inline">useBookings</code>.</p>
          </div>
        </div>
      </section>
      
      <!-- Footer -->
      <div style="margin-top: 64px; padding-top: 32px; border-top: 1px solid var(--gray-200); text-align: center; color: var(--gray-500);">
        <p><strong>VeeoCore API v1.3.0</strong> - ¬© 2026 VeeoStras</p>
        <p style="margin-top: 12px;">
          <a href="mailto:api@veeo-stras.fr" style="color: var(--primary); text-decoration: none;">üìß api@veeo-stras.fr</a>
          &nbsp;|&nbsp;
          <a href="index.html" style="color: var(--primary); text-decoration: none;">üè† Retour √† la d√©mo</a>
          &nbsp;|&nbsp;
          <a href="admin.html" style="color: var(--primary); text-decoration: none;">‚öôÔ∏è Admin</a>
        </p>
        <p style="margin-top: 16px; font-size: 12px;">
          Derni√®re mise √† jour : F√©vrier 2026
        </p>
      </div>
    </main>
  </div>

  <script>
    // Sidebar active state on scroll
    const sections = document.querySelectorAll('section[id]');
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    
    function updateActiveSection() {
      const scrollPos = window.scrollY + 150;
      
      sections.forEach(section => {
        const top = section.offsetTop;
        const height = section.offsetHeight;
        const id = section.getAttribute('id');
        
        if (scrollPos >= top && scrollPos < top + height) {
          sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${id}`) {
              link.classList.add('active');
            }
          });
        }
      });
    }
    
    window.addEventListener('scroll', updateActiveSection);
    
    // Smooth scroll for sidebar links
    sidebarLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Copy code functionality
    document.querySelectorAll('.code-block').forEach(block => {
      const header = block.querySelector('.code-header');
      if (header && !header.querySelector('.code-copy')) {
        const copyBtn = document.createElement('button');
        copyBtn.className = 'code-copy';
        copyBtn.textContent = 'Copier';
        copyBtn.onclick = function() {
          const code = block.querySelector('code').textContent;
          navigator.clipboard.writeText(code).then(() => {
            copyBtn.textContent = '‚úì Copi√©!';
            setTimeout(() => copyBtn.textContent = 'Copier', 2000);
          });
        };
        header.appendChild(copyBtn);
      }
    });
  </script>
</body>
</html>
